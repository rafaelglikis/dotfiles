source .vimrc
let $PATH=$PATH.":/home/rafael/bin"
"" -- Suggested options --
" Show a few lines of context around the cursor. Note that this makes the
" text scroll if you mouse-click near the start or end of the window.
Plug 'tpope/vim-surround' " https://github.com/tpope/vim-surround
set scrolloff=8
set ideajoin
set surround
set sneak
set easymotion
set quickscope
set idearefactormode=visual
let g:qs_highlight_on_keys = ['f', 'F', 't', 'T', 's', 'S']
"IdeaVim: Track Action IDs
"" -- Map IDE actions to IdeaVim -- https://jb.gg/abva4t
"" Map \r to the Reformat Code action
"map \r <Action>(ReformatCode)

"" Map \b to toggle the breakpoint on the current line
"map \b <Action>(ToggleLineBreakpoint)

" Find more examples here: https://jb.gg/share-ideavimrc

" Reimport sources bindings
nnoremap <leader><CR> :source ~/.ideavimrc<CR>
map <leader>jj :e ~/.ideavimrc<CR>

" IDE Shortcuts
" Use ctrl-c as an ide shortcut in normal and visual modes
sethandler <C-C> n-v:ide i:vim
sethandler <C-V> n-v:vim i:ide
sethandler <C-[> a:ide
sethandler <C-]> a:ide
" nmap % <Action>(EditorMatchBrace)

" Window sand panes
nmap <leader>u <Action>(Unsplit)
nmap <leader>U <Action>(UnsplitAll)

" Change panes with alt keys
nnoremap <A-J> <C-W><C-J>
nnoremap <A-K> <C-W><C-K>
nnoremap <A-L> <C-W><C-L>
nnoremap <A-S-l> :action MoveTabRight<cr>
nnoremap <A-H> <C-W><C-H>
" resize panes
map <C-A-m> <Action>(MaximizeEditorInSplit)
map <C-A-k> <Action>(StretchSplitToTop)
map <C-A-j> <Action>(StretchSplitToBottom)
map <C-A-h> <Action>(StretchSplitToLeft)
map <C-A-l> <Action>(StretchSplitToRight)
map <A-S-m> <Action>(MoveEditorToOppositeTabGroup)
nmap <leader>tt :tabo<CR>

" Git
map <leader>g <Action>(Git.Menu)
map <leader>gb <Action>(Git.Branches)
" Git Update
map <leader>gp <Action>(Vcs.UpdateProject)
map <leader>gP <Action>(Vcs.Push)
map <leader>gf <Action>(Git.Fetch)
map <leader>gm <Action>(Git.ResolveConflicts)
map <leader>gd <Action>(Diff.ShowDiff)
" Git Commit
map <leader>gc <Action>(CheckinProject)
nmap <leader>gs <Action>(Git.Show.Stash)
" Git Revert
map <leader>gr <Action>(Vcs.RollbackChangedLines)
map <leader>gR <Action>(ChangesView.Revert)
" Git Log
nmap <leader>gl <Action>(Vcs.ShowTabbedFileHistory)
nmap <leader>gL <Action>(Vcs.Show.Log)
nmap <leader>gg <Action>(Vcs.Log.OpenAnotherTabInEditor)
vmap <leader>gl <Action>(Vcs.ShowHistoryForBlock)
map <leader>ga <Action>(Annotate)

" General Editor Bindings
map <A-.> gt
map <A-,> gT
map <leader>jf :action HideAllWindows<CR>
map <leader>jF :action ToggleDistractionFreeMode<CR>
map <leader>jd :action PhpListenDebugAction<CR>
map <leader>jg :action EditorToggleShowGutterIcons<CR>
"map <leader>ce :action copilot.enableCopilot<CR>
"map <leader>cd :action copilot.disableCopilot<CR>

" Tools
map <leader>jt :action ActivateTerminalToolWindow<CR>
map <leader>jT :action Terminal.OpenInTerminal<CR>
map <leader>jr :action HTTPClient.RunAll<CR>
map <leader>jp :action ActivateProjectToolWindow<CR>
map <leader>jb :action ActivateBookmarksToolWindow<CR>
map <leader>jd :action NewScratchBuffer<CR>

map <leader>jc :action CopyReferencePopupGroup<CR>
vmap H :action HighlightUsagesInFile<CR>
map <leader>js :action NewScratchFile<CR>
map <leader>jS :action Scratch.ShowFilesPopup<CR>

" Code Navigation
map <leader>h :action Back<cr>
nmap <leader>l :action Forward<cr>
map <leader>b :action GotoDeclaration<CR>
map <leader>w :action EditorSelectWord<CR>
vnoremap w :action EditorSelectWord<CR>
vnoremap W :action EditorUnSelectWord<CR>
map <leader>e :action RecentFiles<CR>
map <leader>S :action FileStructurePopup<CR>
map gf :action GotoFile<CR>
" Code Navigation - Find and replace
nmap <leader>/ <Action>(Find)
map <leader>F <Action>(FindInPath)
map <leader>? <Action>(Replace)
nmap <leader>T <Action>(SelectInProjectView)
map <leader>R <Action>(ReplaceInPath)
vmap n <Action>(SelectNextOccurrence)
" Code Navigation - Next previews bindings
map <leader>[ <Action>(EditorCodeBlockStart)
map <leader>] <Action>(EditorCodeBlockEnd)
nnoremap [[ <Action>(MethodUp)
nnoremap ]] <Action>(MethodDown)
nnoremap ]e <Action>(GotoNextError)
nnoremap [e <Action>(GotoPreviousError)
nmap ]b <Action>(GotoNextBookmark)
nmap [b <Action>(GotoPreviousBookmark)
map ]g <Action>(VcsShowNextChangeMarker)
map [g <Action>(VcsShowPrevChangeMarker)

" Bookmarks
nmap <leader>mm :action ToggleBookmark<CR>
nmap <leader>mr :action EditBookmark<CR>
nmap <leader>ml :action ShowBookmarks<CR>
nmap <leader>mj :action GotoNextBookmark<CR>
nmap <leader>mn :action GotoNextBookmark<CR>
nmap <leader>mk :action GotoPreviousBookmark<CR>
nmap <leader>mp :action GotoPreviousBookmark<CR>

" Code Generation
nmap <leader>G <Action>(Generate)
map <leader>I :action ImplementMethods<CR>
map <leader>O :action OverrideMethods<CR>

" Refactorings
vmap T <Action>(Refactorings.QuickListPopupAction)
vmap C <Action>(IntroduceConstant)
vmap V <Action>(IntroduceVariable)
vmap M <Action>(ExtractMethod)
vmap <leader>v <Action>(IntroduceVariable)
vmap <leader>c <Action>(IntroduceConstant)
vmap <leader>m <Action>(ExtractMethod)
" Refactorings - Normal mode
nmap <leader>o <Action>(OptimizeImports)
nmap <leader>i <Action>(Inline)
nmap <leader>R <Action>(RenameElement)
nmap <leader>p <Action>(IntroduceParameter)
nmap <leader>P <Action>(IntroduceField)

" Run and Debug
map <leader>B <Action>(ToggleLineBreakpoint)
nmap <leader>db <Action>(ToggleLineBreakpoint)
vmap <leader>de <Action>(EvaluateExpression)
nmap <leader>dR <Action>(Resume)
nmap <leader>dr <Action>(RunToCursor)
nmap <leader>dw <Action>(Debugger.AddToWatch)
nmap <leader>do <Action>(StepOver)
nmap <leader>dO <Action>(StepOut)
nmap <leader>di <Action>(StepInto)

" Code info
map <leader>q :action QuickJavaDoc<CR>

"if &ide =~? 'PhpStorm'
"endif
